{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "additionalProperties": false,
    "definitions": {
        "attributes": {
            "additionalProperties": false,
            "type": "object",
            "patternProperties": {
                "^": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "number"
                        },
                        {
                            "type": "boolean"
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "number"
                            }
                        }
                    ]
                }
            }
        },
        "coordinateSystems": {
            "type": "array",
            "items": {
                "additionalProperties": false,
                "type": "object",
                "properties": {
                    "coordinate_system_id": {
                        "type": "string"
                    },
                    "topic": {
                        "type": "string"
                    },
                    "frame_id": {
                        "type": "string"
                    },
                    "position": {
                        "type": "array",
                        "items": {
                            "type": "number"
                        },
                        "minItems": 3,
                        "maxItems": 3
                    },
                    "rotation_quaternion": {
                        "type": "array",
                        "items": {
                            "type": "number"
                        },
                        "minItems": 4,
                        "maxItems": 4
                    },
                    "rotation_matrix": {
                        "type": "array",
                        "items": {
                            "type": "number"
                        },
                        "minItems": 9,
                        "maxItems": 9
                    },
                    "angle_axis_rotation": {
                        "type": "array",
                        "items": {
                            "type": "number"
                        },
                        "minItems": 3,
                        "maxItems": 3
                    },
                    "homogeneous_transform": {
                        "type": "array",
                        "items": {
                            "type": "number"
                        },
                        "minItems": 16,
                        "maxItems": 16
                    },
                    "measured_position": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "minItems": 3,
                        "maxItems": 3
                    },
                    "camera_matrix": {
                        "type": "array",
                        "items": {
                            "type": "number"
                        },
                        "minItems": 9,
                        "maxItems": 9
                    },
                    "dist_coeffs": {
                        "type": "array",
                        "items": {
                            "type": "number"
                        },
                        "minItems": 5,
                        "maxItems": 5
                    },
                    "rotation_around_z_in_degrees": {
                        "type": "number"
                    }
                },
                "required": [
                    "angle_axis_rotation",
                    "coordinate_system_id",
                    "frame_id",
                    "position",
                    "rotation_matrix",
                    "rotation_quaternion",
                    "topic"
                ]
            }
        },
        "metadata": {
            "additionalProperties": false,
            "type": "object",
            "properties": {
                "clip_id": {
                    "type": "string"
                },
                "external_clip_id": {
                    "type": "string"
                },
                "project_id": {
                    "type": "string"
                },
                "export_time": {
                    "type": "string",
                    "pattern": "^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2} UTC$"
                },
                "exporter_version": {
                    "type": "string"
                },
                "coordinate_system_3d": {
                    "type": "string"
                },
                "coordinate_system_reference": {
                    "type": "string"
                },
                "folder_name": {
                    "type": "string"
                }
            },
            "required": [
                "clip_id",
                "coordinate_system_3d",
                "coordinate_system_reference",
                "export_time",
                "exporter_version",
                "external_clip_id",
                "folder_name",
                "project_id"
            ]
        }
    },
    "properties": {
        "metadata": {
            "$ref": "#/definitions/metadata"
        },
        "coordinateSystems": {
            "$ref": "#/definitions/coordinateSystems"
        },
        "frames": {
            "type": "array",
            "items": {
                "additionalProperties": false,
                "type": "object",
                "properties": {
                    "frameId": {
                        "type": "string"
                    },
                    "timestamp": {
                        "type": "string"
                    },
                    "annotations": {
                        "additionalProperties": false,
                        "type": "object",
                        "properties": {
                            "2D_BOUNDING_BOX": {
                                "type": "array",
                                "items": {
                                    "additionalProperties": false,
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        },
                                        "objectId": {
                                            "type": "string"
                                        },
                                        "className": {
                                            "type": "string"
                                        },
                                        "geometry": {
                                            "additionalProperties": false,
                                            "type": "object",
                                            "properties": {
                                                "xMin": {
                                                    "type": "number"
                                                },
                                                "yMin": {
                                                    "type": "number"
                                                },
                                                "xMax": {
                                                    "type": "number"
                                                },
                                                "yMax": {
                                                    "type": "number"
                                                }
                                            },
                                            "required": [
                                                "xMax",
                                                "xMin",
                                                "yMax",
                                                "yMin"
                                            ]
                                        },
                                        "attributes": {
                                            "$ref": "#/definitions/attributes"
                                        },
                                        "sensor": {
                                            "additionalProperties": false,
                                            "type": "object",
                                            "properties": {
                                                "type": {
                                                    "type": "string"
                                                },
                                                "uri": {
                                                    "type": "string"
                                                },
                                                "timestamp": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "timestamp",
                                                "type",
                                                "uri"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "attributes",
                                        "className",
                                        "geometry",
                                        "id",
                                        "objectId",
                                        "sensor"
                                    ]
                                }
                            },
                            "2D_POLYLINE": {
                                "type": "array",
                                "items": {
                                    "additionalProperties": false,
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        },
                                        "objectId": {
                                            "type": "string"
                                        },
                                        "className": {
                                            "type": "string"
                                        },
                                        "geometry": {
                                            "additionalProperties": false,
                                            "type": "object",
                                            "properties": {
                                                "points": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "number"
                                                        },
                                                        "minItems": 2,
                                                        "maxItems": 2
                                                    }
                                                }
                                            },
                                            "required": [
                                                "points"
                                            ]
                                        },
                                        "attributes": {
                                            "$ref": "#/definitions/attributes"
                                        },
                                        "sensor": {
                                            "additionalProperties": false,
                                            "type": "object",
                                            "properties": {
                                                "type": {
                                                    "type": "string"
                                                },
                                                "uri": {
                                                    "type": "string"
                                                },
                                                "timestamp": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "timestamp",
                                                "type",
                                                "uri"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "attributes",
                                        "className",
                                        "geometry",
                                        "id",
                                        "objectId",
                                        "sensor"
                                    ]
                                }
                            },
                            "2D_POLYGON": {
                                "type": "array",
                                "items": {
                                    "additionalProperties": false,
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        },
                                        "objectId": {
                                            "type": "string"
                                        },
                                        "className": {
                                            "type": "string"
                                        },
                                        "geometry": {
                                            "additionalProperties": false,
                                            "type": "object",
                                            "properties": {
                                                "points": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "number"
                                                        },
                                                        "minItems": 2,
                                                        "maxItems": 2
                                                    }
                                                }
                                            },
                                            "required": [
                                                "points"
                                            ]
                                        },
                                        "attributes": {
                                            "$ref": "#/definitions/attributes"
                                        },
                                        "sensor": {
                                            "additionalProperties": false,
                                            "type": "object",
                                            "properties": {
                                                "type": {
                                                    "type": "string"
                                                },
                                                "uri": {
                                                    "type": "string"
                                                },
                                                "timestamp": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "timestamp",
                                                "type",
                                                "uri"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "attributes",
                                        "className",
                                        "geometry",
                                        "id",
                                        "objectId",
                                        "sensor"
                                    ]
                                }
                            },
                            "3D_BOUNDING_BOX": {
                                "type": "array",
                                "items": {
                                    "additionalProperties": false,
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        },
                                        "objectId": {
                                            "type": "string"
                                        },
                                        "className": {
                                            "type": "string"
                                        },
                                        "geometry": {
                                            "additionalProperties": false,
                                            "type": "object",
                                            "properties": {
                                                "size": {
                                                    "additionalProperties": false,
                                                    "type": "object",
                                                    "properties": {
                                                        "height": {
                                                            "type": "number"
                                                        },
                                                        "width": {
                                                            "type": "number"
                                                        },
                                                        "length": {
                                                            "type": "number"
                                                        }
                                                    },
                                                    "required": [
                                                        "height",
                                                        "length",
                                                        "width"
                                                    ]
                                                },
                                                "center": {
                                                    "additionalProperties": false,
                                                    "type": "object",
                                                    "properties": {
                                                        "x": {
                                                            "type": "number"
                                                        },
                                                        "y": {
                                                            "type": "number"
                                                        },
                                                        "z": {
                                                            "type": "number"
                                                        }
                                                    },
                                                    "required": [
                                                        "x",
                                                        "y",
                                                        "z"
                                                    ]
                                                },
                                                "quaternion": {
                                                    "additionalProperties": false,
                                                    "type": "object",
                                                    "properties": {
                                                        "x": {
                                                            "type": "number"
                                                        },
                                                        "y": {
                                                            "type": "number"
                                                        },
                                                        "z": {
                                                            "type": "number"
                                                        },
                                                        "w": {
                                                            "type": "number"
                                                        }
                                                    },
                                                    "required": [
                                                        "w",
                                                        "x",
                                                        "y",
                                                        "z"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "center",
                                                "quaternion",
                                                "size"
                                            ]
                                        },
                                        "attributes": {
                                            "$ref": "#/definitions/attributes"
                                        },
                                        "sensor": {
                                            "additionalProperties": false,
                                            "type": "object",
                                            "properties": {
                                                "type": {
                                                    "type": "string"
                                                },
                                                "uri": {
                                                    "type": "string"
                                                },
                                                "timestamp": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "timestamp",
                                                "type",
                                                "uri"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "attributes",
                                        "className",
                                        "geometry",
                                        "id",
                                        "objectId",
                                        "sensor"
                                    ]
                                }
                            },
                            "3D_SEGMENTATION": {
                                "type": "array",
                                "items": {
                                    "additionalProperties": false,
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        },
                                        "objectId": {
                                            "type": "string"
                                        },
                                        "className": {
                                            "type": "string"
                                        },
                                        "geometry": {
                                            "additionalProperties": false,
                                            "type": "object",
                                            "properties": {
                                                "associatedPoints": {
                                                    "additionalProperties": false,
                                                    "type": "array",
                                                    "items": {
                                                        "type": "integer"
                                                    }
                                                },
                                                "numberOfPointsInBox": {
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "associatedPoints",
                                                "numberOfPointsInBox"
                                            ]
                                        },
                                        "attributes": {
                                            "$ref": "#/definitions/attributes"
                                        },
                                        "sensor": {
                                            "additionalProperties": false,
                                            "type": "object",
                                            "properties": {
                                                "type": {
                                                    "type": "string"
                                                },
                                                "uri": {
                                                    "type": "string"
                                                },
                                                "timestamp": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "timestamp",
                                                "type",
                                                "uri"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "attributes",
                                        "className",
                                        "geometry",
                                        "id",
                                        "objectId",
                                        "sensor"
                                    ]
                                }
                            }
                        },
                        "required": [
                            "2D_BOUNDING_BOX",
                            "2D_POLYGON",
                            "2D_POLYLINE",
                            "3D_BOUNDING_BOX",
                            "3D_SEGMENTATION"
                        ]
                    }
                },
                "required": [
                    "annotations",
                    "frameId",
                    "timestamp"
                ]
            }
        }
    },
    "required": [
        "coordinateSystems",
        "frames",
        "metadata"
    ]
}
